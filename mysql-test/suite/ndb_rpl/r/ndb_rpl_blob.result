include/rpl/init_source_replica.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the connection metadata repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START REPLICA; see the 'START REPLICA Syntax' in the MySQL Manual for more information.
[connection master]
create table t1 (
a int not null primary key,
b text not null
) engine=ndb;
insert into t1 values(1, repeat('abc',10));
insert into t1 values(2, repeat('def',200));
insert into t1 values(3, repeat('ghi',3000));
select 'M', a, sha2(b,256) from t1
order by a;
M	a	sha2(b,256)
M	1	ebae678bcd141cc9b9d532b264f854096b645af41490c787218299e1bbc6510e
M	2	73515e01c343cf9a488a875a32874912f5672bddaffd182add04df575a472f40
M	3	921ba28234e00fa902ca39ae2ceecb8c63f52a4c5268f3b28d71ee9cb255cee6
select 'S', a, sha2(b,256) from t1
order by a;
S	a	sha2(b,256)
S	1	ebae678bcd141cc9b9d532b264f854096b645af41490c787218299e1bbc6510e
S	2	73515e01c343cf9a488a875a32874912f5672bddaffd182add04df575a472f40
S	3	921ba28234e00fa902ca39ae2ceecb8c63f52a4c5268f3b28d71ee9cb255cee6
update t1 set b = repeat('xyz',3000) where a = 1;
delete from t1 where a = 2;
update t1 set b = concat(b,'xyz') where a = 3;
select 'M', a, sha2(b,256) from t1
order by a;
M	a	sha2(b,256)
M	1	302bb3a121cd3bf3d18c8aef7b820eb3a69344d175210ec63fe66266697dc43f
M	3	3d21ab095f6da8eec1b4f79d6e04da8c3e26b58ac2dc0c5df1b9c4e469b50e09
select 'S', a, sha2(b,256) from t1
order by a;
S	a	sha2(b,256)
S	1	302bb3a121cd3bf3d18c8aef7b820eb3a69344d175210ec63fe66266697dc43f
S	3	3d21ab095f6da8eec1b4f79d6e04da8c3e26b58ac2dc0c5df1b9c4e469b50e09
drop table t1;
create table t1 (
a int not null primary key,
b text not null,
c int,
d longblob,
e tinyblob
) engine=ndbcluster;
insert into t1 values (
0, repeat(@s2,454), 100, repeat(@s2,345), NULL);
insert into t1 values (
1, repeat(@s0,504), NULL, repeat(@s1,732), repeat(@s1,1));
insert into t1 values (
2, '', 102, '', repeat(@s2,1));
insert into t1 values (
3, repeat(@s0,545), 103, repeat(@s2,788), repeat(@s0,1));
insert into t1 values (
4, repeat(@s1,38), 104, repeat(@s0,260), repeat(@s0,1));
insert into t1 values (
5, repeat(@s2,12), 105, repeat(@s2,40), repeat(@s1,1));
insert into t1 values (
6, repeat(@s1,242), 106, NULL, repeat(@s1,1));
insert into t1 values (
7, repeat(@s1,30), 107, repeat(@s0,161), '');
insert into t1 values (
8, repeat(@s1,719), 108, repeat(@s2,104), NULL);
insert into t1 values (
9, repeat(@s2,427), NULL, NULL, NULL);
select 'M', a, sha2(b,256), c, sha2(d,256), sha2(e,256)
from t1 order by a;
M	a	sha2(b,256)	c	sha2(d,256)	sha2(e,256)
M	0	9968431835707e561891f20696cbc826f17448486a0c6d1943830cb2454f3b78	100	189955da2c8837a9753beced9af20f10ead973289fc014b47131d3c95d5ccdbf	NULL
M	1	be7a2f2f260cdf30ea884158b472e82e11d8274572e55cd49df6696b72b38867	NULL	b51ad4def663f3913493a6dec999a0339f5a1f92325cf027bb583653429a6dc6	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
M	2	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855	102	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855	8f252950e4bbf26a89db26fb0dda56166d73ee38e6721d7f8e289d456aa32166
M	3	b34177012de66d5fe00ffc647874001a43707ea33cdc14297d8413430e150c2f	103	0e266201f4f76af6c39f4a592a4fce626b44a7747b2f5ba2daafce6334e8de7a	f325177051db5f5fe89fbc010456b0f53da5840f8ecc2c84295e8e3860de452c
M	4	5d5af5aa3590cb2b8389f29809840ce54becd1e27f1686e2688efca796381b5e	104	f091b2a35748948834e25c0f64cea242838bbe91d7056bd9aa711baedd241f26	f325177051db5f5fe89fbc010456b0f53da5840f8ecc2c84295e8e3860de452c
M	5	386921e831b14ae771bedde310da828836a004b2646aff055a84e7265ab47d05	105	ab210dc23e48aa3021e0f206f94d903c9d5ec79b8c10bd5a0dd9615a1526dcd8	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
M	6	a06938eb7a4aa574d4a926d6179a4fadc33a5b88f28dcb8d7626673e64a411a8	106	NULL	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
M	7	753783b6bc6782e5f0bfc0401b93833d14d741497c7ba2318066a949fd514a55	107	e2cabb3f7709a5abb35f2b4e4d90dcaa173a64be6b286231204fb53ddbd679e2	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
M	8	55eb9825a7a958de9f0a4684b19da72e4dc42047ec391ce2317119c7da44b4af	108	1ce613f62d5ced30435f9e563062eaaee76104e8b3b5ad03b17223ce447b59bc	NULL
M	9	f2838e4cdb790a7ed068d0e415093047fde76b11e3f50604a0e5987248851d44	NULL	NULL	NULL
select 'S', a, sha2(b,256), c, sha2(d,256), sha2(e,256)
from t1 order by a;
S	a	sha2(b,256)	c	sha2(d,256)	sha2(e,256)
S	0	9968431835707e561891f20696cbc826f17448486a0c6d1943830cb2454f3b78	100	189955da2c8837a9753beced9af20f10ead973289fc014b47131d3c95d5ccdbf	NULL
S	1	be7a2f2f260cdf30ea884158b472e82e11d8274572e55cd49df6696b72b38867	NULL	b51ad4def663f3913493a6dec999a0339f5a1f92325cf027bb583653429a6dc6	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
S	2	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855	102	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855	8f252950e4bbf26a89db26fb0dda56166d73ee38e6721d7f8e289d456aa32166
S	3	b34177012de66d5fe00ffc647874001a43707ea33cdc14297d8413430e150c2f	103	0e266201f4f76af6c39f4a592a4fce626b44a7747b2f5ba2daafce6334e8de7a	f325177051db5f5fe89fbc010456b0f53da5840f8ecc2c84295e8e3860de452c
S	4	5d5af5aa3590cb2b8389f29809840ce54becd1e27f1686e2688efca796381b5e	104	f091b2a35748948834e25c0f64cea242838bbe91d7056bd9aa711baedd241f26	f325177051db5f5fe89fbc010456b0f53da5840f8ecc2c84295e8e3860de452c
S	5	386921e831b14ae771bedde310da828836a004b2646aff055a84e7265ab47d05	105	ab210dc23e48aa3021e0f206f94d903c9d5ec79b8c10bd5a0dd9615a1526dcd8	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
S	6	a06938eb7a4aa574d4a926d6179a4fadc33a5b88f28dcb8d7626673e64a411a8	106	NULL	100c5d7a091dc8d2857b0aaa2a00e450a3b3960a767770d0c9d9c68a5d1ad4c7
S	7	753783b6bc6782e5f0bfc0401b93833d14d741497c7ba2318066a949fd514a55	107	e2cabb3f7709a5abb35f2b4e4d90dcaa173a64be6b286231204fb53ddbd679e2	e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
S	8	55eb9825a7a958de9f0a4684b19da72e4dc42047ec391ce2317119c7da44b4af	108	1ce613f62d5ced30435f9e563062eaaee76104e8b3b5ad03b17223ce447b59bc	NULL
S	9	f2838e4cdb790a7ed068d0e415093047fde76b11e3f50604a0e5987248851d44	NULL	NULL	NULL
drop table t1;
CREATE TABLE IF NOT EXISTS t1 (
db VARBINARY(63) NOT NULL,
name VARBINARY(63) NOT NULL,
slock BINARY(32) NOT NULL,
query BLOB NOT NULL,
node_id INT UNSIGNED NOT NULL,
epoch BIGINT UNSIGNED NOT NULL,
id INT UNSIGNED NOT NULL,
version INT UNSIGNED NOT NULL,
type INT UNSIGNED NOT NULL,
PRIMARY KEY USING HASH (db,name))
ENGINE=NDB;
insert into t1 values ('test','t1',
'abc',repeat(@s0,10),  11,12,13,14,15);
insert into t1 values ('test','t2',
'def',repeat(@s1,100), 21,22,23,24,25);
insert into t1 values ('test','t3',
'ghi',repeat(@s2,1000),31,32,33,34,35);
insert into t1 values ('testtttttttttt','t1',
'abc',repeat(@s0,10),  11,12,13,14,15);
insert into t1 values ('testttttttttttt','t1',
'def',repeat(@s1,100), 21,22,23,24,25);
insert into t1 values ('testtttttttttttt','t1',
'ghi',repeat(@s2,1000),31,32,33,34,35);
insert into t1 values ('t','t11111111111',
'abc',repeat(@s0,10),  11,12,13,14,15);
insert into t1 values ('t','t111111111111',
'def',repeat(@s1,100), 21,22,23,24,25);
insert into t1 values ('t','t1111111111111',
'ghi',repeat(@s2,1000),31,32,33,34,35);
select 'M', db, name, sha2(query,256), node_id, epoch, id, version, type
from t1 order by db, name;
M	db	name	sha2(query,256)	node_id	epoch	id	version	type
M	t	t11111111111	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
M	t	t111111111111	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
M	t	t1111111111111	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
M	test	t1	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
M	test	t2	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
M	test	t3	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
M	testtttttttttt	t1	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
M	testttttttttttt	t1	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
M	testtttttttttttt	t1	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
select 'S', db, name, sha2(query,256), node_id, epoch, id, version, type
from t1 order by db, name;
S	db	name	sha2(query,256)	node_id	epoch	id	version	type
S	t	t11111111111	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
S	t	t111111111111	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
S	t	t1111111111111	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
S	test	t1	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
S	test	t2	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
S	test	t3	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
S	testtttttttttt	t1	53e521fc5ad6f223736f8a91a8bdf6cbc80337cd0a7614a6e249dd90def25cad	11	12	13	14	15
S	testttttttttttt	t1	9668384dd2ed427b39d726fe7fb748637e153ac1b4add2fd10e397e397cdb882	21	22	23	24	25
S	testtttttttttttt	t1	5760e5a537fe571f03b36cf59b8f52257a024d70c871709ef06dc2f2dcd0c895	31	32	33	34	35
drop table t1;
include/rpl/deinit.inc
