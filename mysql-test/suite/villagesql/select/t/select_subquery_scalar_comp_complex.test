# Test Subquery as Scalar Comparison Operand with COMPLEX type
# Grammar: SELECT ... WHERE expr <op> (SELECT ...)

--source include/villagesql/install_complex_extension.inc

CREATE TABLE t1 (id INT PRIMARY KEY, val COMPLEX);
INSERT INTO t1 VALUES (1, '(1.0,2.0)'), (2, '(3.0,4.0)');

CREATE TABLE t2 (filter_val COMPLEX);
INSERT INTO t2 VALUES ('(1.0,2.0)');

# Scalar comparison in WHERE clause
SELECT * FROM t1 WHERE val = (SELECT filter_val FROM t2 LIMIT 1);

DROP TABLE t1;
DROP TABLE t2;

--source include/villagesql/uninstall_complex_extension.inc
