use test;
drop table if exists t1,t2;
set @s0 = 'rggurloniukyehuxdbfkkyzlceixzrehqhvxvxbpwizzvjzpucqmzrhzxzfau';
set @s1 = 'ykyymbzqgqlcjhlhmyqelfoaaohvtbekvifukdtnvcrrjveevfakxarxexomz';
set @s2 = 'dbnfqyzgtqxalcrwtfsqabknvtfcbpoonxsjiqvmhnfikxxhcgoexlkoezvah';
set @v1 = repeat(@s0, 100);
set @v2 = repeat(@s1, 200);
set @v3 = repeat(@s2, 300);
set @v4 = repeat(@s0, 400);
set @v5 = repeat(@s1, 500);
set @v6 = repeat(@s2, 600);
create table t1 (
a int auto_increment,
b text,
primary key (a)
)
engine ndbcluster;
insert into t1(b) values(@v1);
insert into t1(b) values(@v2);
insert into t1(b) values(@v3);
create table t2 (
a text,
b varchar(8),
c mediumblob,
d int,
e tinyblob,
f varchar(2),
primary key (b, d, f)
)
engine ndbcluster;
insert into t2 values(@v1, 'a', @v2, 1, 'xx1', 'u');
insert into t2 values(@v3, 'a', @v4, 1, 'yy1', 'v');
insert into t2 values(@v5, 'a', @v6, 2, 'zz1', 'v');
insert into t2 values(@v1, 'abc', @v2, 1, 'xx2', 'u');
insert into t2 values(@v3, 'abc', @v4, 1, 'yy2', 'v');
insert into t2 values(@v5, 'abc', @v6, 2, 'zz2', 'v');
insert into t2 values(@v1, 'abcdefgh', @v2, 1, 'xx3', 'u');
insert into t2 values(@v3, 'abcdefgh', @v4, 1, 'yy3', 'v');
insert into t2 values(@v5, 'abcdefgh', @v6, 2, 'zz3', 'v');
select a, sha2(b,256) from t1 order by a;
a	sha2(b,256)
1	97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9
2	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30
3	78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d
select sha2(a,256), sha2(c,256), e from t2 order by b, d, f;
sha2(a,256)	sha2(c,256)	e
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx1
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy1
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz1
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx2
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy2
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz2
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx3
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy3
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz3
drop table t1, t2;
select a, sha2(b,256) from t1 order by a;
a	sha2(b,256)
1	97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9
2	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30
3	78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d
select sha2(a,256), sha2(c,256), e from t2 order by b, d, f;
sha2(a,256)	sha2(c,256)	e
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx1
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy1
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz1
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx2
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy2
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz2
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx3
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy3
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz3
drop table t1,t2;
create logfile group lg1 add undofile 'undofile.dat'
  initial_size 16M undo_buffer_size 1M engine=ndb;
create tablespace ts1 add datafile 'datafile.dat'
  use logfile group lg1 initial_size 64M engine=ndb;
create table t1 (
a int,
b text,
primary key (a)
)
tablespace ts1 storage disk
engine ndbcluster;
insert into t1 values(1, @v1);
insert into t1 values(2, @v2);
insert into t1 values(3, @v3);
create table t2 (
a text,
b varchar(8),
c mediumblob,
d int,
e tinyblob,
f varchar(2),
primary key (b, d, f)
)
tablespace ts1 storage disk
engine ndbcluster;
insert into t2 values(@v1, 'a', @v2, 1, 'xx1', 'u');
insert into t2 values(@v3, 'a', @v4, 1, 'yy1', 'v');
insert into t2 values(@v5, 'a', @v6, 2, 'zz1', 'v');
insert into t2 values(@v1, 'abc', @v2, 1, 'xx2', 'u');
insert into t2 values(@v3, 'abc', @v4, 1, 'yy2', 'v');
insert into t2 values(@v5, 'abc', @v6, 2, 'zz2', 'v');
insert into t2 values(@v1, 'abcdefgh', @v2, 1, 'xx3', 'u');
insert into t2 values(@v3, 'abcdefgh', @v4, 1, 'yy3', 'v');
insert into t2 values(@v5, 'abcdefgh', @v6, 2, 'zz3', 'v');
select a, sha2(b,256) from t1 order by a;
a	sha2(b,256)
1	97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9
2	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30
3	78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d
select sha2(a,256), sha2(c,256), e from t2 order by b, d, f;
sha2(a,256)	sha2(c,256)	e
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx1
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy1
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz1
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx2
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy2
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz2
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx3
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy3
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz3
drop table t1, t2;
select a, sha2(b,256) from t1 order by a;
a	sha2(b,256)
1	97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9
2	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30
3	78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d
select sha2(a,256), sha2(c,256), e from t2 order by b, d, f;
sha2(a,256)	sha2(c,256)	e
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx1
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy1
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz1
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx2
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy2
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz2
97b5bd6896b4c8515996a10ef1813b365931fa6f3299c94c9ac9cac4215d62b9	856a620e42995c67505568f5291213a2f2adfd5d4ef418c1fcbb26da79af3f30	xx3
78aa2873fe5bc99babaa639347f74c9d9bfc6ec669a43054b98ceca74cf63b0d	8bc55c3c7476bb2b056505b695334c2d824ba92e1aca32e3ce70a1159c19a8a8	yy3
e748dc69e9aa79e072be1391ee2e065a6f015badf1a275000617ddbf8edebdc1	e7646b96518da2489eb6b7e234ee3144379f436b9399b119d34c83c0b118bdc0	zz3
drop table t1,t2;
alter tablespace ts1 drop datafile 'datafile.dat';
drop tablespace ts1;
drop logfile group lg1 engine=ndb;
